<!-- Popup URL Widget for Blogger -->
<style>
  #popup-panel {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    height: 80%;
    background: #222;
    border: 2px solid #ba63c6;
    z-index: 1000;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  }

  #popup-panel iframe {
    width: 100%;
    height: 90%;
    border: none;
  }

  #popup-panel .close-btn {
    background: #ba63c6;
    color: #fff;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    position: absolute;
    top: 10px;
    right: 10px;
    display: none;
  }

  #countdown {
    position: absolute;
    top: 10px;
    right: 50px;
    color: #fff;
    font-size: 16px;
  }
</style>

<div id="popup-panel">
  <span id="countdown">9</span>
  <button class="close-btn" id="close-btn" onclick="closePopup()">✖</button>
  <iframe 
    id="popup-iframe" 
    src="https://www.w3schools.com/"
    onerror="handleIframeError()"
  ></iframe>
</div>

<script>
  setTimeout(() => {
    document.getElementById('popup-panel').style.display = 'block';
    let countdown = 9;
    const countdownInterval = setInterval(() => {
      countdown--;
      document.getElementById('countdown').innerText = countdown;
      if (countdown <= 0) {
        clearInterval(countdownInterval);
        document.getElementById('close-btn').style.display = 'block';
        document.getElementById('countdown').style.display = 'none';
      }
    }, 1000);
  }, 2000);

  function closePopup() {
    // Close the popup panel
    document.getElementById('popup-panel').style.display = 'none';
    document.getElementById('popup-iframe').src = '';

    // Open the link in a new tab
    window.open('https://www.w3schools.com/', '_blank');
  }

  function handleIframeError() {
    console.warn('Iframe failed to load — opening in a new tab');
    // Open the link directly if the iframe fails
    window.open('https://www.w3schools.com/', '_blank');
    closePopup();
  }
</script>
